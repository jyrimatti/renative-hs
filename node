#! /usr/bin/env nix-shell
#! nix-shell -i bash -p nodejs-10_x -I nixpkgs=channel:nixos-19.03

echo Wrapping nodejs

DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" >/dev/null 2>&1 && pwd )"

# 1) add node wrapper for more memory.
# 2) nix overrides system clang...
PATH=$DIR:/usr/bin/:$PATH LD=/usr/bin/clang LDPLUSPLUS=/usr/bin/clang++ $(which node) --max-old-space-size=4096 $@
